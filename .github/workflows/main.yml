name: Run Unit Tests on Windows and Linux

on:
  pull_request:
    branches: [ main ]
  push:
    branches: [ main ]

jobs:
  test-windows:
    runs-on: windows-latest
    name: "Windows Tests"
    
    steps:
    - name: Checkout code
      uses: actions/checkout@v3
      
    - name: Set up Python
      uses: actions/setup-python@v4
      with:
        python-version: '3.9'
        
    - name: üîß Install dependencies
      run: |
        python -m pip install --upgrade pip
        
    - name: Run tests on Windows
      run: |
        Write-Host "========================================"
        Write-Host "      –ó–ê–ü–£–°–ö –¢–ï–°–¢–û–í –ù–ê WINDOWS          "
        Write-Host "========================================"
        Write-Host ""
        
        python -m unittest testing.tests -v
        
        Write-Host ""
        Write-Host "–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –Ω–∞ Windows:"
        if ($LASTEXITCODE -eq 0) {
          Write-Host "–í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ–π–¥–µ–Ω—ã —É—Å–ø–µ—à–Ω–æ –Ω–∞ Windows!"
        } else {
          Write-Host "–¢–µ—Å—Ç—ã –∑–∞–≤–µ—Ä—à–∏–ª–∏—Å—å —Å –æ—à–∏–±–∫–∞–º–∏ –Ω–∞ Windows!"
          exit 1
        }
        
  test-linux:
    runs-on: ubuntu-latest
    name: "Linux Tests"
    
    steps:
    - name: Checkout code
      uses: actions/checkout@v3
      
    - name: Set up Python
      uses: actions/setup-python@v4
      with:
        python-version: '3.9'
        
    - name: üîß Install dependencies
      run: |
        python -m pip install --upgrade pip
        
    - name: Run tests on Linux
      run: |
        echo "========================================"
        echo "         –ó–ê–ü–£–°–ö –¢–ï–°–¢–û–í –ù–ê LINUX         "
        echo "========================================"
        echo ""
        
        python -m unittest testing.tests -v
        
        echo ""
        echo "–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –Ω–∞ Linux:"
        if [ $? -eq 0 ]; then
          echo "–í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ–π–¥–µ–Ω—ã —É—Å–ø–µ—à–Ω–æ –Ω–∞ Linux!"
        else
          echo "–¢–µ—Å—Ç—ã –∑–∞–≤–µ—Ä—à–∏–ª–∏—Å—å —Å –æ—à–∏–±–∫–∞–º–∏ –Ω–∞ Linux!"
          exit 1
        fi
